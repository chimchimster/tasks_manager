## Task Manager

Task Manager - это приложение для управления задачами с использованием Django REST Framework (DRF). Оно предоставляет CRUD (Create, Read, Update, Delete) операции для задач, а также дополнительные функции, такие как регистрация пользователей и аутентификация с помощью JWT токенов.

### Установка

1. **Склонируйте репозиторий:** 

    ```bash
    git clone git@github.com:chimchimster/tasks_manager.git
    ```

    Либо создайте репозиторий локально:

    ```bash
    git init
    git remote add origin git@github.com:chimchimster/tasks_manager.git
    git checkout -b dev_b
    git pull origin main
    ```

2. **Выполните команды:**

    ```bash
    nano tmanager/.env
    ```

3. **Сохраните в файле необходимые сикреты.** Обратите внимание, что в директории проекта находится файл `env_example`. Скопируйте ключи из файла в созданный вами `.env` и замените значения на свои.

4. **Находясь в диркетории с файлом docker-compose.yaml выполните команду:**

    ```bash
    docker compose up -d
    ```

    В процессе выполнения скачаются и заработают образы PostgreSQL, Redis и приложения Task Manager.

5. **Выполните команду:**

    ```bash
    docker ps
    ```

6. **В выпадающем списке контейнеров найдите ID контейнера `t-manager` и скопируйте его.**

7. **Выполните команду:**

    ```bash
    docker exec -it <CONTAINER ID> bash
    ```

8. **Находясь в оболочке контейнера выполните команды:**

    ```bash
    python3 tmanager/manage.py migrate
    python3 tmanager/manage.py createsuperuser
    ```

    Следуйте инструкциям для того, чтобы создать администратора.

9. **Чтобы применить тестовые данные к базе необходимо, находясь в оболочке контейнера выполнить команду:**

    ```bash
    python3 tmanager/manage.py loaddata tmanager/tasks_api/fixtures/test_data.json
    ```

10. **Чтобы запустить тесты необходимо вызвать команду:**

    ```bash
    python3 tmanager/manage.py test tasks_api.tests
    ```
11. **Остановить приложение можно с помощью команды:**

    ```bash
    docker compose down
    ```
12. **Удалить контейнеры можно с помощью команды:**

    ```bash
    docker compose rm
    ```
    
### Допинфо

1. Приложение работает на порту 8211. Откройте браузер http://127.0.0.1:8211 и вы увидите вывод Not Found.;
2. Перейдите по адресу http://127.0.0.1:8211/api/v1/swagger чтобы ознакомиться с документацией приложения.
3. Поскольку база, брокер и приложение работают в одной сети, то в .env файле необходимо указать доменные имена базы и брокера сообщений. Например, **redis://redis:6379/0**. Для PostgreSQL необходимо в .env указать **POSTGRESQL_HOST=postgres**.
4. Для того чтобы начать использовать API необходимо зарегистрировать пользователя (либо использовать суперпользователя, которого мы зарегистрировали ранее).
5. Используйте curl, wget либо Postman для отправки запросов на эндпоинты приложения.
6. В хэдере каждого запроса (исключая получение токена и регистрацию) необходимо передавать JWT токен. Например, 'Authorization: Bearer <ТОКЕН>'.